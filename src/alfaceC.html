<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Calendário de Regas</title>
   <link rel="stylesheet" href="/css/calendario.css">
  <style>
    :root {
      --cor-destaque: #d1e7dd;
      --fundo: #fee0a2;
      --texto: #1c1c1c;
      --borda: #c0c0c0;
      --botao: #198754;
      --botao-hover: #146c43;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background: var(--fundo);
      color: var(--texto);
      padding: 20px;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
    }

    .title {
      text-align: center;
      font-size: 2rem;
      margin-bottom: 30px;
      font-weight: bold;
    }

    .plant-card {
      background: var(--cor-destaque);
      border-radius: 16px;
      box-shadow: 0 6px 12px rgba(0,0,0,0.05);
      overflow: hidden;
      margin-bottom: 30px;
      transition: transform 0.2s ease;
      display: flex;
      flex-direction: row;
      align-items: stretch;
    }

    .plant-card:hover {
      transform: scale(1.01);
    }

    .plant-img {
      width: 250px;
      object-fit: cover;
      border-radius: 16px 0 0 16px;
    }

    .plant-content {
      padding: 24px;
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .plant-content h2 {
      margin-bottom: 8px;
      font-size: 1.5rem;
    }

    .plant-content p {
      font-size: 1rem;
      margin-bottom: 16px;
    }

    .calendar-container {
      margin-top: 10px;
    }

    .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    button.month-nav {
      background: transparent;
      border: none;
      font-size: 1.4rem;
      cursor: pointer;
      color: var(--texto);
    }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 6px;
    }

    .calendar-cell {
      position: relative;
      padding: 10px;
      background: white;
      border-radius: 8px;
      text-align: center;
      font-size: 0.9rem;
      cursor: pointer;
      transition: background 0.2s ease;
      border: 1px solid var(--borda);
    }

    .calendar-cell:hover {
      background: #e8f0ea;
    }

    .calendar-cell.done::after {
      content: '✔';
      position: absolute;
      top: 6px;
      right: 6px;
      color: var(--botao);
      font-size: 0.9rem;
    }

    .calendar-cell.other-month {
      opacity: 0.3;
    }

    @media (max-width: 768px) {
      .plant-card {
        flex-direction: column;
        align-items: center;
      }

      .plant-img {
        width: 100%;
        height: 200px;
        border-radius: 16px 16px 0 0;
      }

      .plant-content {
        padding: 20px;
      }
    }
  </style>
</head>
<body>

<div class="container">
  <h1 class="title">Agenda de Regas da Planta</h1>

  <div class="plant-card">
    <img src="/img/alface.jpeg" alt="Planta Alecrim" class="plant-img">
    <div class="plant-content">
      <div>
        <h2 id="titulo">Alface</h2>
        <p>Use o calendário abaixo para marcar os dias que você regou sua planta.</p>

        <div class="calendar-container">
          <div class="calendar-header">
            <button class="month-nav" id="prev-month">&lt;</button>
            <span id="month-year"></span>
            <button class="month-nav" id="next-month">&gt;</button>
          </div>
          <div class="calendar-grid" id="calendar"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  const calendarEl = document.getElementById('calendar');
  const monthYearEl = document.getElementById('month-year');
  const prevBtn = document.getElementById('prev-month');
  const nextBtn = document.getElementById('next-month');

  let currentDate = new Date();
  let markedDays = JSON.parse(localStorage.getItem('regs')) || {};

  function save() {
    localStorage.setItem('regs', JSON.stringify(markedDays));
  }

  function drawCalendar() {
    calendarEl.innerHTML = '';
    const year = currentDate.getFullYear();
    const month = currentDate.getMonth();
    monthYearEl.textContent = currentDate.toLocaleString('pt-BR', { month: 'long', year: 'numeric' });

    const firstDay = new Date(year, month, 1).getDay();
    const daysInMonth = new Date(year, month + 1, 0).getDate();

    const prevDays = firstDay === 0 ? 6 : firstDay - 1;
    const totalCells = prevDays + daysInMonth;
    const nextDays = (7 - (totalCells % 7)) % 7;

    for (let i = prevDays; i > 0; i--) {
      const d = new Date(year, month, 1 - i);
      createCell(d, true);
    }

    for (let d = 1; d <= daysInMonth; d++) {
      createCell(new Date(year, month, d), false);
    }

    for (let d = 1; d <= nextDays; d++) {
      createCell(new Date(year, month + 1, d), true);
    }
  }

  function createCell(date, otherMonth) {
    const y = date.getFullYear(), m = date.getMonth(), d = date.getDate();
    const key = `${y}-${m+1}-${d}`;
    const done = markedDays[key];

    const el = document.createElement('div');
    el.classList.add('calendar-cell');
    if (otherMonth) el.classList.add('other-month');
    if (!otherMonth && done) el.classList.add('done');

    el.textContent = d;
    el.addEventListener('click', () => {
      if (otherMonth) return;
      markedDays[key] = !markedDays[key];
      el.classList.toggle('done');
      save();
    });
    calendarEl.appendChild(el);
  }

  prevBtn.addEventListener('click', () => {
    currentDate.setMonth(currentDate.getMonth() - 1);
    drawCalendar();
  });
  nextBtn.addEventListener('click', () => {
    currentDate.setMonth(currentDate.getMonth() + 1);
    drawCalendar();
  });

  drawCalendar();
</script>
  <section class="links">
    <a href="/src/calendario.html" class="botao-voltar">⬅ Voltar para as suas plantas</a>
  </section>
</body>
</html>
